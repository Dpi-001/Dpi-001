name: Generate GitHub Metrics

on:
  schedule:
    - cron: "0 0 * * *"   # Runs daily at midnight
  workflow_dispatch:      # Allow manual trigger

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Generate metrics
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}

          # 🏷 Base sections
          base: header, activity, community, repositories, metadata
          config_timezone: Asia/Kathmandu
          config_display: large
          config_output: svg

          # 🎨 Appearance
          config_order: base.header, base.activity, base.community, base.repositories, base.metadata, habits, languages, isocalendar, pagespeed, music
          config_twemoji: yes
          config_gemoji: yes

          # 📅 Contribution calendar (3D style)
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

          # 📊 Coding habits
          plugin_habits: yes
          plugin_habits_from: 200  # number of events analyzed
          plugin_habits_days: 14   # lookback period in days
          plugin_habits_facts: yes
          plugin_habits_charts: yes

          # 📝 Languages
          plugin_languages: yes
          plugin_languages_ignored: >-
            html, css, scss
          plugin_languages_limit: 8
          plugin_languages_threshold: 0%
          plugin_languages_indepth: yes
          plugin_languages_details: lines, bytes-size, percentage
          plugin_languages_colors: github

          # 🌐 PageSpeed Insights
          plugin_pagespeed: yes
          plugin_pagespeed_url: https://simon.lecoq.io
          plugin_pagespeed_detailed: yes
          plugin_pagespeed_screenshot: yes

          # 🎶 Music (Apple Music example, change to Spotify if you want)
          plugin_music: yes
          plugin_music_provider: apple
          plugin_music_playlist: https://music.apple.com/library/playlists
          plugin_music_limit: 2
          plugin_music_mode: playlist
