name: GitHub Metrics

on:
  schedule:
    - cron: "0 0 * * *"   # runs daily at 00:00 UTC
  workflow_dispatch:      # lets you run it manually

permissions:
  contents: write

jobs:
  metrics:
    runs-on: ubuntu-latest
    steps:
      - name: Generate metrics SVG
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: ${{ github.repository_owner }}
          filename: github-metrics.svg
          template: classic
          config_timezone: Asia/Kathmandu

          # base sections (top-left area, followers, repos, etc.)
          base: header, activity, community, repositories, metadata

          # 3D-ish contribution calendar
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

          # coding habits (time-of-day, day-of-week, charts)
          plugin_habits: yes
          plugin_habits_facts: yes
          plugin_habits_charts: yes
          plugin_habits_days: 14
          plugin_habits_from: 200

          # languages bar
          plugin_languages: yes
          plugin_languages_details: bytes-size, percentage
          plugin_languages_limit: 10
          plugin_languages_indepth: yes

          # PageSpeed (✅ if you have a website; else comment these 3 lines)
          plugin_pagespeed: yes
          plugin_pagespeed_url: https://<your-site-or-remove>
          plugin_pagespeed_screenshot: yes

          # Apple Music suggestions (optional — comment out if you don't use)
          plugin_music: yes
          plugin_music_provider: apple
          plugin_music_mode: playlist
          plugin_music_limit: 2
          plugin_music_playlist: https://music.apple.com/<your-playlist-or-remove>
